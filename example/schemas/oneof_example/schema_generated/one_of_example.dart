// GENERATED CODE - DO NOT MODIFY BY HAND
// Source: example/schemas/oneof_example/schema.json
// Generated by json_schema2dart

import 'result.dart';
import 'validation_error.dart';

/// Demonstrates oneOf discriminated unions
class OneOfExample {
  final Result? result;

  const OneOfExample({this.result});

  factory OneOfExample.fromJson(Map<String, dynamic> json) {
    final remaining = Map<String, dynamic>.from(json);
    final result = json['result'] == null
        ? null
        : Result.fromJson((json['result'] as Map).cast<String, dynamic>());
    remaining.remove('result');
    return OneOfExample(result: result);
  }

  Map<String, dynamic> toJson() {
    final map = <String, dynamic>{};
    if (result != null) map['result'] = result!.toJson();
    return map;
  }

  void validate({String pointer = '', ValidationContext? context}) {
    final _ptr0 = appendJsonPointer(pointer, 'result');
    final _value0 = result;
    if (_value0 != null) {
      context?.markProperty(pointer, 'result');
      final _jsonp0 = _value0.toJson();
      final _constraintp0c0_0 = context == null ? null : ValidationContext();
      var _constraintp0m0_0 = false;
      try {
        final context = _constraintp0c0_0;
        final _constraintp0v0_0 = ResultObject.fromJson(
          (_jsonp0 as Map).cast<String, dynamic>(),
        );
        _constraintp0v0_0.validate(pointer: _ptr0, context: context);
        _constraintp0m0_0 = true;
      } on ValidationError {
      } catch (_) {}
      final _constraintp0c0_1 = context == null ? null : ValidationContext();
      var _constraintp0m0_1 = false;
      try {
        final context = _constraintp0c0_1;
        final _constraintp0v0_1 = ResultObject2.fromJson(
          (_jsonp0 as Map).cast<String, dynamic>(),
        );
        _constraintp0v0_1.validate(pointer: _ptr0, context: context);
        _constraintp0m0_1 = true;
      } on ValidationError {
      } catch (_) {}
      final _constraintp0matches0 = <bool>[
        _constraintp0m0_0,
        _constraintp0m0_1,
      ];
      final _constraintp0count0 = _constraintp0matches0
          .where((value) => value)
          .length;
      if (_constraintp0count0 != 1) {
        throwValidationError(
          _ptr0,
          'oneOf',
          'Expected exactly one subschema in #/properties/result/oneOf to validate.',
        );
      }
      if (context != null && _constraintp0m0_0 && _constraintp0c0_0 != null) {
        context.mergeFrom(_constraintp0c0_0!);
      }
      if (context != null && _constraintp0m0_1 && _constraintp0c0_1 != null) {
        context.mergeFrom(_constraintp0c0_1!);
      }
    }
  }
}
