// GENERATED CODE - DO NOT MODIFY BY HAND
// Source: example/schemas/allof_example/schema.json
// Generated by json_schema2dart

import 'person.dart';
import 'validation_error.dart';

/// Demonstrates allOf composition
class AllOfExample {
  final Person? person;

  const AllOfExample({this.person});

  factory AllOfExample.fromJson(Map<String, dynamic> json) {
    final remaining = Map<String, dynamic>.from(json);
    final person = json['person'] == null
        ? null
        : Person.fromJson((json['person'] as Map).cast<String, dynamic>());
    remaining.remove('person');
    return AllOfExample(person: person);
  }

  Map<String, dynamic> toJson() {
    final map = <String, dynamic>{};
    if (person != null) map['person'] = person!.toJson();
    return map;
  }

  void validate({String pointer = '', ValidationContext? context}) {
    final _ptr0 = appendJsonPointer(pointer, 'person');
    final _value0 = person;
    if (_value0 != null) {
      context?.markProperty(pointer, 'person');
      final _jsonp0 = _value0.toJson();
      final _constraintp0c0_0 = context == null ? null : ValidationContext();
      var _constraintp0m0_0 = false;
      try {
        final context = _constraintp0c0_0;
        final _constraintp0v0_0 = RootSchemaPerson.fromJson(
          (_jsonp0 as Map).cast<String, dynamic>(),
        );
        _constraintp0m0_0 = true;
      } on ValidationError {
      } catch (_) {}
      final _constraintp0c0_1 = context == null ? null : ValidationContext();
      var _constraintp0m0_1 = false;
      try {
        final context = _constraintp0c0_1;
        final _constraintp0v0_1 = RootSchemaPerson2.fromJson(
          (_jsonp0 as Map).cast<String, dynamic>(),
        );
        _constraintp0m0_1 = true;
      } on ValidationError {
      } catch (_) {}
      final _constraintp0matches0 = <bool>[
        _constraintp0m0_0,
        _constraintp0m0_1,
      ];
      if (_constraintp0matches0.any((value) => !value)) {
        throwValidationError(
          _ptr0,
          'allOf',
          'Expected all subschemas in #/properties/person/allOf to validate.',
        );
      }
      if (context != null && _constraintp0m0_0 && _constraintp0c0_0 != null) {
        context.mergeFrom(_constraintp0c0_0!);
      }
      if (context != null && _constraintp0m0_1 && _constraintp0c0_1 != null) {
        context.mergeFrom(_constraintp0c0_1!);
      }
    }
  }
}
